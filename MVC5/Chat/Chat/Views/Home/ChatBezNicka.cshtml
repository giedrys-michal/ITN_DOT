
@{
    ViewBag.Title = "ChatBezNicka";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Chat</h2>

<div class="container">
    <p>
        <input type="text" id="tresc" />
        <input type="button" id="wyslij" value="Wyślij" />
    </p>
    <p>
        <ul id="komunikaty"></ul>
    </p>
</div>
@section scripts {
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <script src="~/signalr/hubs"></script>

    <script>
        $(function () {
            var chat = $.connection.ChatHub;
            chat.client.wyswietlWiadomosc = function (tresc) {
                $('#komunikaty').append('<li>' + tresc + '</li>');
            };

            $.connection.hub.start().done(function () {
                $('#wyslij').click(function () {
                    chat.server.wyslijBezNicka($('#tresc').val());
                });
            });
        });

    </script>
}
